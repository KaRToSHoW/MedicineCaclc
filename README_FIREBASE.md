# –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–π –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä - –ú–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

–ü–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –º–µ–¥–∏—Ü–∏–Ω—Å–∫–∏—Ö —Ä–∞—Å—á—ë—Ç–æ–≤ –Ω–∞ –±–∞–∑–µ Expo (React Native) —Å Firebase Firestore –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö.

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ **–ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã** —Å —Ä—É—Å—Å–∫–æ–π –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏–µ–π
- ‚úÖ **Firebase Authentication** - —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥ –ø–æ email/–ø–∞—Ä–æ–ª—é
- ‚úÖ **Firebase Firestore** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Ä–∞—Å—á—ë—Ç–æ–≤
- ‚úÖ **–ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—á—ë—Ç–æ–≤** —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- ‚úÖ **–ö–ª–∏–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è** —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ —Å –∑–∞–∫–ª—é—á–µ–Ω–∏—è–º–∏ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è–º–∏
- ‚úÖ **–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ—Å—Ç—å** - iOS, Android, Web

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
npm install
```

### –ó–∞–ø—É—Å–∫

```bash
npm start         # –ó–∞–ø—É—Å–∫ Expo (–≤—ã–±—Ä–∞—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—É)
npm run web       # –ó–∞–ø—É—Å–∫ –≤ –±—Ä–∞—É–∑–µ—Ä–µ (http://localhost:3000)
npm run ios       # iOS —Å–∏–º—É–ª—è—Ç–æ—Ä
npm run android   # Android —ç–º—É–ª—è—Ç–æ—Ä
```

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
npm test          # –í—Å–µ —Ç–µ—Å—Ç—ã (Jest + ESLint + TypeScript)
npm run lint      # –¢–æ–ª—å–∫–æ –ª–∏–Ω—Ç–∏–Ω–≥
```

## üì± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Frontend
- **React Native 0.74.5** + **Expo SDK 51**
- **Expo Router 3.5** - —Ñ–∞–π–ª–æ–≤–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è
- **NativeWind v4** - Tailwind CSS –¥–ª—è React Native
- **TypeScript 5.3**
- **Zustand** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

### Backend
- **Firebase Authentication** - –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **Firebase Firestore** - NoSQL –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- **Firebase Analytics** - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## üî• –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Firebase

### 1. Firebase –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–§–∞–π–ª `services/firebase.ts` —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```typescript
const firebaseConfig = {
  apiKey: "AIzaSyAGUW3la2giOJn_sG2Nz4HRAfqP1QuY0KA",
  authDomain: "medcalc-71fb2.firebaseapp.com",
  projectId: "medcalc-71fb2",
  // ...
};
```

### 2. Firestore –∏–Ω–¥–µ–∫—Å—ã (–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û!)

–°–æ–∑–¥–∞–π—Ç–µ —Å–æ—Å—Ç–∞–≤–Ω–æ–π –∏–Ω–¥–µ–∫—Å –≤ Firebase Console:
- **Collection**: `calculation_results`
- **Fields**: 
  - `userId` (Ascending)
  - `performedAt` (Descending)

–ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `firestore.indexes.json` –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è.

### 3. –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `firestore.rules` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞:

```javascript
match /calculation_results/{resultId} {
  allow read, write: if request.auth.uid == resource.data.userId;
}
```

üìñ **–ü–æ–ª–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è:** —Å–º. [FIREBASE_SETUP.md](./FIREBASE_SETUP.md)

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ app/                      # –≠–∫—Ä–∞–Ω—ã (Expo Router)
‚îÇ   ‚îú‚îÄ‚îÄ index.tsx            # –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞–º–∏
‚îÇ   ‚îú‚îÄ‚îÄ calculator/[id].tsx  # –≠–∫—Ä–∞–Ω —Ä–∞—Å—á—ë—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ result/[id].tsx      # –†–µ–∑—É–ª—å—Ç–∞—Ç —Ä–∞—Å—á—ë—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ history.tsx          # –ò—Å—Ç–æ—Ä–∏—è —Ä–∞—Å—á—ë—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ calculators/         # –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ (auth)/              # –≠–∫—Ä–∞–Ω—ã –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ components/              # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ services/                # API —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ firebase.ts         # Firebase –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ auth.ts             # –°–µ—Ä–≤–∏—Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ calculators.ts      # –°–µ—Ä–≤–∏—Å –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ calculation_results.ts  # –°–µ—Ä–≤–∏—Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚îú‚îÄ‚îÄ stores/                  # Zustand stores
‚îÇ   ‚îú‚îÄ‚îÄ calculatorsStore.ts
‚îÇ   ‚îî‚îÄ‚îÄ calculationResultsStore.ts
‚îú‚îÄ‚îÄ types/                   # TypeScript —Ç–∏–ø—ã
‚îú‚îÄ‚îÄ utils/                   # –£—Ç–∏–ª–∏—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ interpreter.ts      # –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ formulaEvaluator.ts # –í—ã—á–∏—Å–ª–µ–Ω–∏–µ —Ñ–æ—Ä–º—É–ª
‚îú‚îÄ‚îÄ assets/                  # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ—Å—É—Ä—Å—ã
‚îÇ   ‚îî‚îÄ‚îÄ calculators.json    # –î–∞–Ω–Ω—ã–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤
‚îú‚îÄ‚îÄ tailwind.config.js      # –î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞ (—Ü–≤–µ—Ç–∞, —à—Ä–∏—Ñ—Ç—ã)
‚îî‚îÄ‚îÄ firestore.rules         # –ü—Ä–∞–≤–∏–ª–∞ Firestore
```

## üé® –î–∏–∑–∞–π–Ω-—Å–∏—Å—Ç–µ–º–∞

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –≤ `tailwind.config.js` —Å —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏:

```javascript
colors: {
  primary: 'hsl(217, 91%, 60%)',      // –û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç
  'text-primary': 'hsl(0, 0%, 13%)',  // –û—Å–Ω–æ–≤–Ω–æ–π —Ç–µ–∫—Å—Ç
  'bg-surface': 'hsl(0, 0%, 98%)',    // –§–æ–Ω –ø–æ–≤–µ—Ä—Ö–Ω–æ—Å—Ç–∏
  // ... –∏ —Ç.–¥.
}
```

**‚ö†Ô∏è –í–∞–∂–Ω–æ:** –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–µ —Ç–æ–∫–µ–Ω—ã (`text-text-primary`), –Ω–µ –ø—Ä—è–º—ã–µ —Ü–≤–µ—Ç–∞ (`text-black`).

## üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–¥–µ

```typescript
import { useAuth } from '@/hooks/useAuth';

const { user, isAuthenticated, login, logout } = useAuth();

// –í—Ö–æ–¥
await login(email, password);

// –í—ã—Ö–æ–¥
await logout();

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
if (isAuthenticated) {
  // –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–æ—à—ë–ª
}
```

## üíæ –†–∞–±–æ—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏

### –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

```typescript
import { useCalculationResultsStore } from '@/stores/calculationResultsStore';

const { addItem } = useCalculationResultsStore();

const result = await addItem({
  calculatorId: calculator.id,
  inputData: { weight: 70, height: 175 },
  resultValue: 22.86,
  interpretation: "–ù–æ—Ä–º–∞–ª—å–Ω—ã–π –≤–µ—Å"
});
```

### –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏

```typescript
const { items, loading, fetchAll } = useCalculationResultsStore();

useEffect(() => {
  if (isAuthenticated) {
    fetchAll();
  }
}, [isAuthenticated]);
```

## üßÆ –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã

–î–∞–Ω–Ω—ã–µ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤ –≤ `assets/calculators.json`:

```json
{
  "id": "bmi",
  "name": "Body Mass Index",
  "nameRu": "–ò–Ω–¥–µ–∫—Å –º–∞—Å—Å—ã —Ç–µ–ª–∞",
  "formula": "weight / (height/100)^2",
  "inputFields": [...],
  "interpretationRules": [
    {
      "condition": "< 18.5",
      "interpretationRu": "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –≤–µ—Å",
      "conclusion": "–í–∞—à –ò–ú–¢ –Ω–∏–∂–µ –Ω–æ—Ä–º—ã...",
      "recommendations": "–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è..."
    }
  ]
}
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–∞

1. –î–æ–±–∞–≤—å—Ç–µ –∑–∞–ø–∏—Å—å –≤ `assets/calculators.json`
2. –£–∫–∞–∂–∏—Ç–µ `formula` (JavaScript –≤—ã—Ä–∞–∂–µ–Ω–∏–µ)
3. –î–æ–±–∞–≤—å—Ç–µ `interpretationRules` –¥–ª—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏
4. –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—è–≤–∏—Ç—Å—è –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### Jest —Ç–µ—Å—Ç—ã

```bash
npm run test:jest    # –¢–æ–ª—å–∫–æ Jest —Ç–µ—Å—Ç—ã
```

### ESLint + TypeScript

```bash
npm run lint:eslint  # ESLint
npm run lint:types   # TypeScript –ø—Ä–æ–≤–µ—Ä–∫–∞
npm run lint:fix     # –ê–≤—Ç–æ–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
```

## üìä –í–∞–∂–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

1. **Firebase Firestore –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
   - –£–¥–∞–ª–µ–Ω–æ –ª–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
   - –í—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ Firestore
   - –¢—Ä–µ–±—É–µ—Ç—Å—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

2. **–†—É—Å—Å–∫–∞—è –ª–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è**
   - –î–∏–Ω–∞–º–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –∏–∑ JSON
   - –†—É—Å—Å–∫–∏–µ –Ω–∞–∑–≤–∞–Ω–∏—è –∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä–æ–≤
   - –ó–∞–∫–ª—é—á–µ–Ω–∏—è –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ —Ä—É—Å—Å–∫–æ–º

3. **Firebase Analytics**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Analytics
   - –ë–µ–∑–æ–ø–∞—Å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–∞

### ‚ùå –ß—Ç–æ —É–¥–∞–ª–µ–Ω–æ

- –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ (`localStorage`/`SecureStore`) –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –§—É–Ω–∫—Ü–∏—è `migrateLocalToFirestore()`
- –ü–æ–ª–µ `migrated` –≤ —Ç–∏–ø–∞—Ö

### ‚ö†Ô∏è –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

- –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç—É
- –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- –ò—Å—Ç–æ—Ä–∏—è –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –¥–ª—è –Ω–µ–∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

1. **ESLint warnings** - `exhaustive-deps` –¥–ª—è `useEffect`
   - –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ —Ä–∞–±–æ—Ç—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - –ú–æ–∂–Ω–æ –∏–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å `fetchAll` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

2. **Firebase AsyncStorage warning** (—Ç–æ–ª—å–∫–æ –≤ —Ç–µ—Å—Ç–∞—Ö)
   - –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏ auth
   - –ù–µ –≤–ª–∏—è–µ—Ç –Ω–∞ production

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License

## üë• –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–æ–±–ª–µ–º —Å–æ–∑–¥–∞–π—Ç–µ issue –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ –∏–ª–∏ –æ–±—Ä–∞—Ç–∏—Ç–µ—Å—å –∫ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Firebase.

---

**üî• Firebase setup:** [FIREBASE_SETUP.md](./FIREBASE_SETUP.md)  
**üì± Expo docs:** https://docs.expo.dev/  
**üé® NativeWind docs:** https://www.nativewind.dev/
